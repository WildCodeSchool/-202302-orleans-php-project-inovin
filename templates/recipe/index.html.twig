{% extends 'visitor.html.twig' %}

{% block title %}
{{ parent()}}
- Liste des Recettes
{% endblock %}

{% block stylesheets %}
{{ parent() }}
{{ encore_entry_link_tags('recipe') }}
{% endblock %}

{% block body %}
<header class="container-fluid container-md py-5 mb-5">
    <h2 class="text-primary-light fw-light mt-5 letter-spacing">
        {% include "components/svg/_icon_decoration.svg.twig" %}RECETTES
    </h2>

    <div>
        {% include 'components/svg/_frame_surlignage_main.svg.twig' %}
    </div>
</header>

<main class="container">
    <div class="row row-cols-2 gap-3">
        {% for recipe in recipes %}
        <div class="recipe-card col p-3">
            <div class="d-flex">
                <div class="recipe-h2 text-nowrap">
                    <h2 class="custom-card-title fs-3">{{ recipe.name|u.truncate(20, '...') }} </h2>
                </div>
                <div class="line"></div>
            </div>
            <div class="d-flex flex-row justify-content-center mt-2 gap-3">
                <div class="recipe-img col-3">
                    <img src="{{ asset('build/images/img_card_wine.svg') }}" alt="wine">
                </div>
                <div class="d-flex gap-3 flex-column">
                    {% for itemTastingSheet in recipe.tastingSheet %}
                    <div class="d-flex gap-2">
                        <div class="col-9">
                            {% set width = (itemTastingSheet.dosage ?? '0' * 100) / 250 %}
                            <p class="mb-1 fs-p">{{ itemTastingSheet.wine.name|capitalize ~ ', '
                                ~itemTastingSheet.wine.grapeVariety.name|capitalize }}</p>
                            <div class="d-flex flex-row gap-3">
                                <div class="progress w-100" role="progressbar" aria-label="Basic example"
                                    aria-valuenow="{{ itemTastingSheet.dosage ?? '0'}}" aria-valuemin="0"
                                    aria-valuemax="100">
                                    <div class="progress-bar" style="width: {{ width ~ '%'}};"></div>
                                </div>

                            </div>

                        </div>
                        <div class="col">
                            <div class="d-flex justify-content-end align-items-end h-100 custom-transform">
                                <p class="mb-0 pt-3"> {{ itemTastingSheet.dosage ?? '0'}}Ml</p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="d-flex flex-row justify-content-between gap-4 mt-4 pt-2">
                <a class="btn btn-sm btn-primary" href="#">EN SAVOIR PLUS</a>
                <a class="btn btn-sm btn-primary" href="#">COMMANDER</a>
            </div>
        </div>
        {% endfor %}
    </div>
</main>
{% endblock %}